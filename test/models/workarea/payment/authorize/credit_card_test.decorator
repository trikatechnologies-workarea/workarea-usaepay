module Workarea
  decorate Payment::Authorize::CreditCardTest, with: :usaepay_transaction do #[8]
    decorated { include UsaepayTransactionVcrGateway } #[9]

    def test_complete_sets_the_response_on_the_transaction
      VCR.use_cassette 'credit_card/store_auth' do
        operation = Payment::Authorize::CreditCard.new(tender, transaction)
        operation.complete!
        assert_instance_of(
          ActiveMerchant::Billing::Response,
          transaction.response
        )
      end
    end
  end
end